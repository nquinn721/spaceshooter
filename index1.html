<!DOCTYPE html>
<html lang="en">
<head ng-app="space-shooter">
	<meta charset="UTF-8">
	<title>Space Fighter</title>
	<style>
	html, body{
		margin: 0;
		padding: 0;
	}
	canvas{
		border:2px solid black;
		box-sizing: border-box;
	}
	canvas, .connected{
		float: left;
	}
	.connected {
		position: fixed;
	    right: 0;
	    max-height: 50%;
	    background: #222;
	    color: white;
	    padding: 0 46px 20px 20px;
	    overflow: auto;
	}
	#space-fighter{
		position: fixed;
		bottom: 10px;
		right: 10px;
	}
	.none{
		display: none;
	}
	</style>
</head>
<body>
<img src="img/stars2.jpg" alt="" id="background" class="none">
<img src="img/player.png" alt="" id="player" class="none">
<img src="img/enemy.png" alt="" id="enemy" class="none">
<canvas id="space-fighter" width="900" height="900"></canvas>
<!-- <canvas id="c" width="900" height="900"></canvas> -->
<canvas id="mini-map" width="400" height="400"></canvas>
<div class="connected">
	<h3>Connected Sockets</h3>
	<div class="sockets"></div>
	<h3>Visible Players <span class="total"></span></h3>
	<div class="visible-sockets">
		
	</div>
</div>
<script src="js/lib/angularjs.js"></script>
<script src="js/lib/requirejs.js" data-main="js/main"></script>
<script>
	


// var items = [],
// 	miniMapSizeW, miniMapSizeH, segments, subscribed, 
// 	player, minimap, connected, grid;

	



// function getItem(item) {
// 	for(var i = 0; i < items.length; i++)
// 		if(items[i].id === item.id)return item;
// }

// var playerRotation;
// $(document).on('keydown', function (e) {
// 	var k = e.keyCode;

// 	if(k === 38){
// 		io.emit('move', 'up');
// 		playerRotation = -90;
// 	}
	
// 	if(k === 40){
// 		io.emit('move', 'down');
// 		playerRotation = 90;	
// 	}
	
// 	if(k === 37){
// 		io.emit('move', 'left');
// 		playerRotation = -180;
// 	}
	
// 	if(k === 39){
// 		io.emit('move', 'right');
// 		playerRotation = 0;
// 	}
	
// 	if(k === 32)
// 		io.emit('shoot');

// 	if(k === 219)
// 		io.emit('remove speed');
// 	if(k === 221)
// 		io.emit('add speed');
// }).on('keyup', function() {
// 	io.emit('stopmove');
// });
// var drawn;
// var logged;
// var loggedSubscribed;
	
// function draw() {
// 	minimapCTX.clearRect(0,0,canvas.width,canvas.height);
// 	ctx.clearRect(0,0,gameCanvas.width,gameCanvas.height);
// 	drawGame();
// 	drawMiniMap();
// 	drawSubscribed();
// 	requestAnimationFrame(draw);
// }
// draw();
// var img = document.getElementById('background');
// var playerimg = document.getElementById('player');
// var enemyimg = document.getElementById('enemy');

// function drawGame() {
// 	if(player){
// 		ctx.save();
// 		ctx.translate(-player.x + (gameCanvas.width / 2), -player.y + (gameCanvas.height / 2));
// 		drawBackground();
// 		for(var i = 0; i < items.length; i++)
// 			if(items[i].id !== player.id){
// 				if(items[i].id && items[i].id.match('npc'))
// 					ctx.drawImage(enemyimg, items[i].x, items[i].y, 50, 30);
// 				else{
// 					ctx.fillStyle = 'red';
// 					ctx.fillRect(items[i].x, items[i].y, items[i].w, items[i].h);
// 				}
// 			}
// 		ctx.restore();
// 		drawRotatedImage(playerimg, gameCanvas.width / 2, gameCanvas.height / 2, playerRotation);
// 	}
// }
// var TO_RADIANS = Math.PI/180; 
// function drawRotatedImage(image, x, y, angle) { 
// 	ctx.save(); 
// 	ctx.translate(x, y);
// 	ctx.rotate(angle * TO_RADIANS);
// 	ctx.drawImage(image, -(image.width/2 - 70), -(image.height/2 - 40), 140, 80);
// 	ctx.restore(); 
// }
// function drawBackground() {
// 	ctx.save();
// 	var pat = ctx.createPattern(img,"repeat");
// 	ctx.rect( 0, 0, grid.width, grid.height);
// 	ctx.fillStyle = pat;
// 	ctx.fill();
// 	ctx.restore();
// }

// function drawMiniMap() {
// 	minimapCTX.fillStyle = "black"; 
// 	if(minimap){
// 		for(var i = 0; i < minimap.length; i++){
// 			if(minimap[i].id !== player.id){
// 				if(minimap[i].id && !minimap[i].id.match('npc')){
// 					minimapCTX.fillRect(
// 						minimap[i].x / miniMapSizeW, 
// 						minimap[i].y / miniMapSizeH, 
// 						minimap[i].w / 3, 
// 						minimap[i].h / 3
// 					);
					
// 				}else{
// 					// minimapCTX.fillRect(
// 					// 	minimap[i].x / miniMapSizeW, 
// 					// 	minimap[i].y / miniMapSizeH, 
// 					// 	minimap[i].w / 40, 
// 					// 	minimap[i].h / 40
// 					// );
// 				}
				
// 			}
// 		}

// 		minimapCTX.fillRect(
// 			player.x / miniMapSizeW, 
// 			player.y / miniMapSizeH, 
// 			player.w / 3, 
// 			player.h / 3
// 		);

// 	// 	// if(segments){
// 	// 	// 	minimapCTX.fillStyle = "#aaa"; 
// 	// 	// 	minimapCTX.strokeStyle = "#aaa"; 
// 	// 	// 	for(var i = 0; i < segments.length; i++){
// 	// 	// 		var x = segments[i].x / miniMapSizeW,
// 	// 	// 			y = segments[i].y / miniMapSizeH,
// 	// 	// 			w = segments[i].w / miniMapSizeW,
// 	// 	// 			h = segments[i].h / miniMapSizeH;

// 	// 	// 		minimapCTX.rect(x, y, w, h);
// 	// 	// 		minimapCTX.fillText('[' + (y / h) + ',' + (x / w) + ']',x + (w / 2) - 15,y + (h / 2));
// 	// 	// 	}
// 	// 	// 	minimapCTX.stroke();
// 	// 	// }

// 	}
// }
// function drawSubscribed() {
// 	if(subscribed){
// 		if(!loggedSubscribed){
// 			console.log(subscribed);
// 			loggedSubscribed = true;
// 		}
// 		// minimapCTX.fillStyle = 'rgba(243, 177, 255, 0.72)';
// 		for(var i = 0; i < subscribed.length; i++){
// 			minimapCTX.fillRect(
// 				subscribed[i].x / miniMapSizeW, 
// 				subscribed[i].y / miniMapSizeH, 
// 				subscribed[i].w / miniMapSizeW, 
// 				subscribed[i].h / miniMapSizeH
// 			);
// 		}
// 	}
// }


// window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();
</script>

</body>
</html>